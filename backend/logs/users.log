2025-03-13 19:47:22,490 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:47:22,530 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:47:27,347 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:47:27,351 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:47:49,697 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:47:49,729 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:47:50,392 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:47:50,394 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:47:50,610 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:47:50,612 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:47:53,491 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:47:53,494 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:49:15,067 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:49:15,118 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:49:18,307 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:49:18,310 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:49:18,526 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:49:18,528 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:49:18,724 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:49:18,727 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:49:18,942 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:49:18,944 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:49:38,781 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:49:38,788 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:50:14,013 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 100
2025-03-13 19:50:14,032 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 19:51:39,315 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 19:51:39,335 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 20:57:16,590 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 20:57:16,596 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 20:57:18,825 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 20:57:18,828 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 20:57:19,654 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 20:57:19,657 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 20:57:22,691 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 20:57:22,694 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 20:57:25,189 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 20:57:25,199 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 20:57:26,855 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 20:57:26,857 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 20:57:29,430 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 20:57:29,433 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 20:57:53,845 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 20:57:53,847 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 20:59:06,916 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 20:59:07,220 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 20:59:09,991 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 20:59:10,007 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 20:59:16,812 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 20:59:16,831 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:03:55,062 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:03:55,081 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:03:56,725 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:03:56,727 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:04:19,789 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:04:19,803 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:17:01,324 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:17:01,365 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:17:44,573 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:17:44,592 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:17:45,663 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:17:45,666 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:17:53,584 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:17:53,596 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:32:40,347 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:32:40,351 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:33:13,041 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:33:13,045 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:33:17,215 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:33:17,216 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:51:23,545 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:51:23,549 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:51:25,986 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:51:26,001 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:54:08,455 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:54:08,459 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:55:26,328 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:55:26,330 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:58:10,762 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:58:10,793 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:58:13,655 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:58:13,662 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:58:36,035 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:58:36,041 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:58:43,862 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:58:43,876 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:58:43,879 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:58:43,881 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:58:56,504 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:58:56,511 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:59:03,227 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:59:03,234 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:59:04,026 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:59:04,083 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 21:59:54,198 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 21:59:54,204 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 22:00:00,454 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 22:00:00,494 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 22:00:25,720 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 22:00:25,722 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 22:01:52,691 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 22:01:52,694 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 22:01:56,838 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 22:01:56,843 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 22:02:08,361 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 22:02:08,363 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 22:02:10,411 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 22:02:10,414 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 22:02:43,297 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 22:02:43,308 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 22:02:46,752 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 22:02:46,755 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 22:12:48,944 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 22:12:48,991 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:36:33,264 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:36:33,269 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:37:50,416 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:37:50,442 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:37:52,871 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:37:52,890 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:39:28,696 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:39:28,703 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:39:57,429 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:39:57,485 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:39:59,702 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:39:59,708 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:40:07,832 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:40:07,850 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:40:08,539 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:40:08,576 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:40:09,613 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:40:09,617 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:40:31,792 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:40:31,799 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:40:54,137 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:40:54,147 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:40:58,977 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:40:59,003 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:41:03,129 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:41:03,141 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:41:09,453 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:41:09,457 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:41:52,289 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:41:52,296 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:44:49,036 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:44:49,047 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:45:00,461 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:45:00,482 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:45:08,338 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:45:08,365 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:45:18,517 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:45:18,524 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:45:24,972 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:45:25,002 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:45:28,818 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:45:28,823 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:45:41,458 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:45:41,465 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:46:40,442 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:46:40,450 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:46:42,311 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:46:42,323 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:48:14,622 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:48:14,632 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:48:24,894 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:48:24,902 - users - INFO - Found 1 users out of 1 total matches
2025-03-13 23:50:50,410 - users - INFO - Creating new user: testuser
2025-03-13 23:50:56,719 - users - INFO - Creating new user: testuser2
2025-03-13 23:50:56,747 - users - INFO - User created successfully: 2
2025-03-13 23:51:15,178 - users - INFO - Creating new user: 额外额外
2025-03-13 23:51:15,210 - users - INFO - User created successfully: 3
2025-03-13 23:51:15,380 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:51:15,385 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:51:19,173 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:51:19,190 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:51:20,707 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:51:20,721 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:51:34,275 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:51:34,297 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:54:11,432 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:54:11,501 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:54:47,700 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:54:47,735 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:55:04,036 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:55:04,045 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:55:15,215 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:55:15,229 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:55:16,052 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:55:16,055 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:55:22,663 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:55:22,668 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:56:12,997 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-13 23:56:13,034 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:56:23,183 - users - INFO - Searching users with query: username='' email='' department='' role='', skip: 0, limit: 10
2025-03-13 23:56:23,214 - users - INFO - Found 3 users out of 3 total matches
2025-03-13 23:56:51,018 - users - INFO - Creating new user: www
2025-03-13 23:58:08,228 - users - INFO - Creating new user: 111
2025-03-13 23:58:17,573 - users - INFO - Creating new user: 111
2025-03-13 23:58:23,263 - users - INFO - Creating new user: 111
2025-03-13 23:59:45,165 - users - INFO - Creating new user: e
2025-03-14 00:41:06,805 - users - INFO - Creating new user: testuser
2025-03-14 00:41:06,807 - users - ERROR - Error creating user: (sqlite3.IntegrityError) NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (username, email, full_name, department, role, hashed_password, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('testuser', 'test@example.com', 'Test User', 'IT', 'admin', None, 1, '2025-03-13 16:41:06.807357', '2025-03-13 16:41:06.807571')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: users.hashed_password

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 61, in create_user
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4353, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4449, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (username, email, full_name, department, role, hashed_password, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('testuser', 'test@example.com', 'Test User', 'IT', 'admin', None, 1, '2025-03-13 16:41:06.807357', '2025-03-13 16:41:06.807571')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-14 00:41:09,358 - users - INFO - Fetching user with id: 999
2025-03-14 00:41:10,059 - users - INFO - Updating user: 999
2025-03-14 00:41:11,371 - users - INFO - Deleting user: 999
2025-03-14 00:47:09,612 - users - INFO - Creating new user: testuser
2025-03-14 00:47:09,616 - users - ERROR - Error creating user: (sqlite3.IntegrityError) NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (username, email, full_name, department, role, hashed_password, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('testuser', 'test@example.com', 'Test User', 'IT', 'admin', None, 1, '2025-03-13 16:47:09.615985', '2025-03-13 16:47:09.616207')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: users.hashed_password

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 61, in create_user
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4353, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4449, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (username, email, full_name, department, role, hashed_password, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('testuser', 'test@example.com', 'Test User', 'IT', 'admin', None, 1, '2025-03-13 16:47:09.615985', '2025-03-13 16:47:09.616207')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-14 00:47:10,100 - users - INFO - Creating new user: testuser
2025-03-14 00:47:10,580 - users - INFO - Creating new user: testuser2
2025-03-14 00:47:11,810 - users - INFO - Fetching user with id: 999
2025-03-14 00:47:12,330 - users - INFO - Updating user: 999
2025-03-14 00:47:13,145 - users - INFO - Deleting user: 999
2025-03-14 00:53:01,383 - users - INFO - Creating new user: testuser
2025-03-14 00:53:01,385 - users - ERROR - Error creating user: (sqlite3.IntegrityError) NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (username, email, full_name, department, role, hashed_password, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('testuser', 'test@example.com', 'Test User', 'IT', 'admin', None, 1, '2025-03-13 16:53:01.384706', '2025-03-13 16:53:01.384914')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: users.hashed_password

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 61, in create_user
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4353, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4449, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (username, email, full_name, department, role, hashed_password, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('testuser', 'test@example.com', 'Test User', 'IT', 'admin', None, 1, '2025-03-13 16:53:01.384706', '2025-03-13 16:53:01.384914')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-14 00:53:02,128 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 00:53:02,130 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 00:53:02,536 - users - INFO - Searching users with query: username=None email=None department='IT' role=None, skip: 0, limit: 10
2025-03-14 00:53:02,537 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x104165240>]
2025-03-14 00:53:02,539 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 00:53:02,938 - users - INFO - Fetching user with id: 2
2025-03-14 00:53:03,190 - users - INFO - Fetching user with id: 999
2025-03-14 00:53:03,684 - users - INFO - Updating user: 999
2025-03-14 00:53:04,181 - users - INFO - Deleting user: 2
2025-03-14 00:53:04,184 - users - INFO - User deleted successfully: 2
2025-03-14 00:53:04,186 - users - INFO - Fetching user with id: 2
2025-03-14 00:55:39,779 - users - INFO - Creating new user: testuser
2025-03-14 00:55:40,021 - users - INFO - User created successfully: 2
2025-03-14 00:55:40,763 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 00:55:40,765 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 00:55:41,013 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 00:55:41,014 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1122d5420>]
2025-03-14 00:55:41,016 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 00:55:41,267 - users - INFO - Fetching user with id: 2
2025-03-14 00:55:41,523 - users - INFO - Fetching user with id: 999
2025-03-14 00:55:41,771 - users - INFO - Updating user: 2
2025-03-14 00:55:41,772 - users - INFO - User updated successfully: 2
2025-03-14 00:55:42,083 - users - INFO - Updating user: 999
2025-03-14 00:55:42,333 - users - INFO - Updating user: 3
2025-03-14 00:55:42,609 - users - INFO - Deleting user: 2
2025-03-14 00:55:42,612 - users - INFO - User deleted successfully: 2
2025-03-14 00:55:42,614 - users - INFO - Fetching user with id: 2
2025-03-14 01:01:54,522 - users - INFO - Creating new user: testuser
2025-03-14 01:01:54,771 - users - INFO - User created successfully: 1
2025-03-14 01:01:55,273 - users - INFO - Creating new user: testuser
2025-03-14 01:01:55,764 - users - INFO - Creating new user: testuser2
2025-03-14 01:01:56,248 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 01:01:56,250 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:01:56,733 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 01:01:56,733 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1180dd1b0>]
2025-03-14 01:01:56,735 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 01:01:57,219 - users - INFO - Fetching user with id: 2
2025-03-14 01:01:57,707 - users - INFO - Updating user: 2
2025-03-14 01:01:57,708 - users - INFO - User updated successfully: 2
2025-03-14 01:01:57,953 - users - INFO - Updating user: 999
2025-03-14 01:01:58,676 - users - INFO - Updating user: 3
2025-03-14 01:01:59,157 - users - INFO - Deleting user: 2
2025-03-14 01:01:59,159 - users - INFO - User deleted successfully: 2
2025-03-14 01:01:59,404 - users - INFO - Deleting user: 999
2025-03-14 01:05:57,139 - users - INFO - Creating new user: testuser
2025-03-14 01:05:57,381 - users - INFO - User created successfully: 1
2025-03-14 01:05:57,865 - users - INFO - Creating new user: testuser
2025-03-14 01:05:58,352 - users - INFO - Creating new user: testuser2
2025-03-14 01:05:58,875 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 01:05:58,877 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:05:59,364 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 01:05:59,365 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x108fd5390>]
2025-03-14 01:05:59,367 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 01:05:59,849 - users - INFO - Fetching user with id: 2
2025-03-14 01:06:00,341 - users - INFO - Updating user: 2
2025-03-14 01:06:00,342 - users - INFO - User updated successfully: 2
2025-03-14 01:06:00,590 - users - INFO - Updating user: 999
2025-03-14 01:06:01,315 - users - INFO - Updating user: 3
2025-03-14 01:06:01,800 - users - INFO - Deleting user: 2
2025-03-14 01:06:01,803 - users - INFO - User deleted successfully: 2
2025-03-14 01:06:02,049 - users - INFO - Deleting user: 999
2025-03-14 01:10:32,054 - users - INFO - Creating new user: testuser
2025-03-14 01:10:32,326 - users - INFO - User created successfully: 1
2025-03-14 01:10:32,817 - users - INFO - Creating new user: testuser
2025-03-14 01:10:33,362 - users - INFO - Creating new user: testuser2
2025-03-14 01:10:33,849 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 01:10:33,851 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:10:34,338 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 01:10:34,338 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x11487c4f0>]
2025-03-14 01:10:34,340 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 01:10:34,828 - users - INFO - Fetching user with id: 2
2025-03-14 01:10:35,318 - users - INFO - Updating user: 2
2025-03-14 01:10:35,319 - users - INFO - User updated successfully: 2
2025-03-14 01:10:35,563 - users - INFO - Updating user: 999
2025-03-14 01:10:36,288 - users - INFO - Updating user: 3
2025-03-14 01:10:36,773 - users - INFO - Deleting user: 2
2025-03-14 01:10:36,776 - users - INFO - User deleted successfully: 2
2025-03-14 01:10:37,022 - users - INFO - Deleting user: 999
2025-03-14 01:13:31,085 - users - INFO - Creating new user: testuser
2025-03-14 01:13:31,326 - users - INFO - User created successfully: 1
2025-03-14 01:13:31,809 - users - INFO - Creating new user: testuser
2025-03-14 01:13:32,292 - users - INFO - Creating new user: testuser2
2025-03-14 01:13:32,781 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 01:13:32,783 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:13:33,272 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 01:13:33,272 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1075d53c0>]
2025-03-14 01:13:33,274 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 01:13:33,756 - users - INFO - Fetching user with id: 2
2025-03-14 01:13:34,244 - users - INFO - Updating user: 2
2025-03-14 01:13:34,246 - users - INFO - User updated successfully: 2
2025-03-14 01:13:34,495 - users - INFO - Updating user: 999
2025-03-14 01:13:35,217 - users - INFO - Updating user: 3
2025-03-14 01:13:35,701 - users - INFO - Deleting user: 2
2025-03-14 01:13:35,704 - users - INFO - User deleted successfully: 2
2025-03-14 01:13:35,949 - users - INFO - Deleting user: 999
2025-03-14 01:15:21,354 - users - INFO - Creating new user: testuser
2025-03-14 01:15:21,594 - users - INFO - User created successfully: 1
2025-03-14 01:15:22,078 - users - INFO - Creating new user: testuser
2025-03-14 01:15:22,574 - users - INFO - Creating new user: testuser2
2025-03-14 01:15:23,059 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 01:15:23,061 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:15:23,558 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 01:15:23,559 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x110cd53f0>]
2025-03-14 01:15:23,561 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 01:15:24,045 - users - INFO - Fetching user with id: 2
2025-03-14 01:15:24,531 - users - INFO - Updating user: 2
2025-03-14 01:15:24,533 - users - INFO - User updated successfully: 2
2025-03-14 01:15:24,777 - users - INFO - Updating user: 999
2025-03-14 01:15:25,500 - users - INFO - Updating user: 3
2025-03-14 01:15:25,986 - users - INFO - Deleting user: 2
2025-03-14 01:15:25,990 - users - INFO - User deleted successfully: 2
2025-03-14 01:15:26,236 - users - INFO - Deleting user: 999
2025-03-14 01:18:51,592 - users - INFO - Creating new user: testuser
2025-03-14 01:18:51,850 - users - INFO - User created successfully: 1
2025-03-14 01:18:52,338 - users - INFO - Creating new user: testuser
2025-03-14 01:18:52,829 - users - INFO - Creating new user: testuser2
2025-03-14 01:18:53,318 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 01:18:53,320 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:18:53,810 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 01:18:53,810 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x121931ae0>]
2025-03-14 01:18:53,812 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 01:18:54,294 - users - INFO - Fetching user with id: 2
2025-03-14 01:18:54,783 - users - INFO - Updating user: 2
2025-03-14 01:18:54,785 - users - INFO - User updated successfully: 2
2025-03-14 01:18:55,030 - users - INFO - Updating user: 999
2025-03-14 01:18:55,884 - users - INFO - Updating user: 3
2025-03-14 01:18:56,371 - users - INFO - Deleting user: 2
2025-03-14 01:18:56,373 - users - INFO - User deleted successfully: 2
2025-03-14 01:18:56,618 - users - INFO - Deleting user: 999
2025-03-14 01:20:22,735 - users - INFO - Creating new user: testuser
2025-03-14 01:20:22,976 - users - INFO - User created successfully: 1
2025-03-14 01:20:23,463 - users - INFO - Creating new user: testuser
2025-03-14 01:20:23,983 - users - INFO - Creating new user: testuser2
2025-03-14 01:20:24,472 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 01:20:24,474 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:20:24,959 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 01:20:24,959 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x10676c4f0>]
2025-03-14 01:20:24,962 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 01:20:25,446 - users - INFO - Fetching user with id: 2
2025-03-14 01:20:25,932 - users - INFO - Updating user: 2
2025-03-14 01:20:25,934 - users - INFO - User updated successfully: 2
2025-03-14 01:20:26,179 - users - INFO - Updating user: 999
2025-03-14 01:20:26,903 - users - INFO - Updating user: 3
2025-03-14 01:20:27,388 - users - INFO - Deleting user: 2
2025-03-14 01:20:27,392 - users - INFO - User deleted successfully: 2
2025-03-14 01:20:27,638 - users - INFO - Deleting user: 999
2025-03-14 01:23:09,028 - users - INFO - Creating new user: testuser
2025-03-14 01:23:09,274 - users - INFO - User created successfully: 1
2025-03-14 01:23:09,758 - users - INFO - Creating new user: testuser
2025-03-14 01:23:10,252 - users - INFO - Creating new user: testuser2
2025-03-14 01:23:10,742 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 01:23:10,744 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:23:11,231 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 01:23:11,231 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x106159240>]
2025-03-14 01:23:11,233 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 01:23:11,716 - users - INFO - Fetching user with id: 2
2025-03-14 01:23:12,200 - users - INFO - Updating user: 2
2025-03-14 01:23:12,202 - users - INFO - User updated successfully: 2
2025-03-14 01:23:12,449 - users - INFO - Updating user: 999
2025-03-14 01:23:13,175 - users - INFO - Updating user: 3
2025-03-14 01:23:13,660 - users - INFO - Deleting user: 2
2025-03-14 01:23:13,692 - users - INFO - User deleted successfully: 2
2025-03-14 01:23:13,951 - users - INFO - Deleting user: 999
2025-03-14 01:24:06,492 - users - INFO - Creating new user: testuser
2025-03-14 01:24:06,734 - users - INFO - User created successfully: 1
2025-03-14 01:24:07,219 - users - INFO - Creating new user: testuser
2025-03-14 01:24:07,705 - users - INFO - Creating new user: testuser2
2025-03-14 01:24:08,194 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 01:24:08,196 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:24:08,683 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 01:24:08,684 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1114d5480>]
2025-03-14 01:24:08,686 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 01:24:09,170 - users - INFO - Fetching user with id: 2
2025-03-14 01:24:09,658 - users - INFO - Updating user: 2
2025-03-14 01:24:09,659 - users - INFO - User updated successfully: 2
2025-03-14 01:24:09,909 - users - INFO - Updating user: 999
2025-03-14 01:24:10,665 - users - INFO - Updating user: 3
2025-03-14 01:24:11,152 - users - INFO - Deleting user: 2
2025-03-14 01:24:11,155 - users - INFO - User deleted successfully: 2
2025-03-14 01:24:11,400 - users - INFO - Deleting user: 999
2025-03-14 01:25:39,806 - users - INFO - Creating new user: testuser
2025-03-14 01:25:40,052 - users - INFO - User created successfully: 1
2025-03-14 01:25:40,547 - users - INFO - Creating new user: testuser
2025-03-14 01:25:41,034 - users - INFO - Creating new user: testuser2
2025-03-14 01:25:41,522 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 01:25:41,524 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:25:42,012 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 01:25:42,012 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x106976b30>]
2025-03-14 01:25:42,014 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 01:25:42,501 - users - INFO - Fetching user with id: 2
2025-03-14 01:25:43,019 - users - INFO - Updating user: 2
2025-03-14 01:25:43,020 - users - INFO - User updated successfully: 2
2025-03-14 01:25:43,265 - users - INFO - Updating user: 999
2025-03-14 01:25:43,992 - users - INFO - Updating user: 3
2025-03-14 01:25:44,618 - users - INFO - Deleting user: 2
2025-03-14 01:25:44,621 - users - INFO - User deleted successfully: 2
2025-03-14 01:25:44,867 - users - INFO - Deleting user: 999
2025-03-14 01:27:57,787 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 01:27:57,818 - users - ERROR - Error searching users: (pymysql.err.OperationalError) (1054, "Unknown column 'users.hashed_password' in 'field list'")
[SQL: SELECT count(*) AS count_1 
FROM (SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.full_name AS users_full_name, users.department AS users_department, users.`role` AS users_role, users.hashed_password AS users_hashed_password, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'users.hashed_password' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 103, in search_users
    total = db_users.count()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3147, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2836, in scalar
    ret = self.one()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2809, in one
    return self._iter().one()  # type: ignore
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'users.hashed_password' in 'field list'")
[SQL: SELECT count(*) AS count_1 
FROM (SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.full_name AS users_full_name, users.department AS users_department, users.`role` AS users_role, users.hashed_password AS users_hashed_password, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-14 01:34:18,589 - users - INFO - Creating new user: testuser
2025-03-14 01:34:18,827 - users - INFO - User created successfully: 1
2025-03-14 01:34:19,311 - users - INFO - Creating new user: testuser
2025-03-14 01:34:19,810 - users - INFO - Creating new user: testuser2
2025-03-14 01:34:20,299 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 01:34:20,301 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:34:20,788 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 01:34:20,788 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1064d5390>]
2025-03-14 01:34:20,790 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 01:34:21,273 - users - INFO - Fetching user with id: 2
2025-03-14 01:34:21,759 - users - INFO - Updating user: 2
2025-03-14 01:34:21,760 - users - INFO - User updated successfully: 2
2025-03-14 01:34:22,006 - users - INFO - Updating user: 999
2025-03-14 01:34:22,724 - users - INFO - Updating user: 3
2025-03-14 01:34:23,205 - users - INFO - Deleting user: 2
2025-03-14 01:34:23,208 - users - INFO - User deleted successfully: 2
2025-03-14 01:34:23,528 - users - INFO - Deleting user: 999
2025-03-14 01:50:27,505 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 01:50:27,510 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:50:31,276 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 01:50:31,278 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:50:41,466 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 01:50:41,471 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:52:13,070 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 01:52:13,115 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:52:20,983 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 01:52:21,047 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:52:25,421 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 01:52:25,456 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 01:54:33,316 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 01:54:33,364 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:04:00,464 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:04:00,485 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:05:30,009 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:05:30,049 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:05:55,571 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:05:55,592 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:06:01,690 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:06:01,693 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:09:06,510 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:09:06,533 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:09:36,570 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:09:36,603 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:09:55,710 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:09:55,718 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:10:24,752 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:10:24,774 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:10:26,720 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:10:26,722 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:10:28,160 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:10:28,165 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:10:29,096 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:10:29,098 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:10:34,538 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:10:34,544 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:10:56,828 - users - INFO - Creating new user: ssssssssssss
2025-03-14 02:10:57,162 - users - INFO - User created successfully: 3
2025-03-14 02:10:57,264 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:10:57,272 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 02:11:09,097 - users - INFO - Searching users with query: username= email= department= role=admin, skip: 0, limit: 10
2025-03-14 02:11:09,098 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x109035c60>]
2025-03-14 02:11:09,132 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:11:10,883 - users - INFO - Fetching user with id: 1
2025-03-14 02:11:14,731 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:11:14,750 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 02:11:24,541 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:11:24,546 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 02:11:27,794 - users - INFO - Fetching user with id: 1
2025-03-14 02:13:09,341 - users - INFO - Fetching user with id: 1
2025-03-14 02:13:26,100 - users - INFO - Fetching user with id: 1
2025-03-14 02:13:28,179 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:13:28,183 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 02:14:39,177 - users - INFO - Creating new user: testuser
2025-03-14 02:14:39,418 - users - INFO - User created successfully: 1
2025-03-14 02:14:39,994 - users - INFO - Creating new user: testuser
2025-03-14 02:14:40,477 - users - INFO - Creating new user: testuser2
2025-03-14 02:14:40,963 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 02:14:40,965 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 02:14:41,453 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 02:14:41,453 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x112d82b30>]
2025-03-14 02:14:41,455 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 02:14:41,937 - users - INFO - Fetching user with id: 2
2025-03-14 02:14:42,423 - users - INFO - Updating user: 2
2025-03-14 02:14:42,424 - users - INFO - User updated successfully: 2
2025-03-14 02:14:42,669 - users - INFO - Updating user: 999
2025-03-14 02:14:43,395 - users - INFO - Updating user: 3
2025-03-14 02:14:43,879 - users - INFO - Deleting user: 2
2025-03-14 02:14:43,882 - users - INFO - User deleted successfully: 2
2025-03-14 02:14:44,126 - users - INFO - Deleting user: 999
2025-03-14 02:18:56,093 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 02:18:56,159 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 09:47:32,862 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 09:47:33,009 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 10:37:43,880 - users - INFO - Creating new user: testuser
2025-03-14 10:37:44,118 - users - INFO - User created successfully: 1
2025-03-14 10:37:44,598 - users - INFO - Creating new user: testuser
2025-03-14 10:37:45,084 - users - INFO - Creating new user: testuser2
2025-03-14 10:37:45,569 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 10:37:45,571 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 10:37:46,055 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 10:37:46,055 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x113719720>]
2025-03-14 10:37:46,057 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 10:37:46,536 - users - INFO - Fetching user with id: 2
2025-03-14 10:37:47,021 - users - INFO - Updating user: 2
2025-03-14 10:37:47,022 - users - INFO - User updated successfully: 2
2025-03-14 10:37:47,265 - users - INFO - Updating user: 999
2025-03-14 10:37:47,991 - users - INFO - Updating user: 3
2025-03-14 10:37:48,474 - users - INFO - Deleting user: 2
2025-03-14 10:37:48,477 - users - INFO - User deleted successfully: 2
2025-03-14 10:37:48,722 - users - INFO - Deleting user: 999
2025-03-14 10:42:07,700 - users - INFO - Creating new user: testuser
2025-03-14 10:42:07,941 - users - INFO - User created successfully: 1
2025-03-14 10:42:08,423 - users - INFO - Creating new user: testuser
2025-03-14 10:42:08,908 - users - INFO - Creating new user: testuser2
2025-03-14 10:42:09,386 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 10:42:09,388 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 10:42:09,868 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 10:42:09,870 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x111c0f550>]
2025-03-14 10:42:09,872 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 10:42:10,351 - users - INFO - Fetching user with id: 2
2025-03-14 10:42:10,828 - users - INFO - Updating user: 2
2025-03-14 10:42:10,830 - users - INFO - User updated successfully: 2
2025-03-14 10:42:11,074 - users - INFO - Updating user: 999
2025-03-14 10:42:11,785 - users - INFO - Updating user: 3
2025-03-14 10:42:12,261 - users - INFO - Deleting user: 2
2025-03-14 10:42:12,264 - users - INFO - User deleted successfully: 2
2025-03-14 10:42:12,505 - users - INFO - Deleting user: 999
2025-03-14 10:44:27,804 - users - INFO - Creating new user: testuser
2025-03-14 10:44:28,042 - users - INFO - User created successfully: 1
2025-03-14 10:44:28,530 - users - INFO - Creating new user: testuser
2025-03-14 10:44:29,011 - users - INFO - Creating new user: testuser2
2025-03-14 10:44:29,491 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 10:44:29,493 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 10:44:29,973 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 10:44:29,973 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x106091570>]
2025-03-14 10:44:29,975 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 10:44:30,455 - users - INFO - Fetching user with id: 2
2025-03-14 10:44:30,935 - users - INFO - Updating user: 2
2025-03-14 10:44:30,937 - users - INFO - User updated successfully: 2
2025-03-14 10:44:31,179 - users - INFO - Updating user: 999
2025-03-14 10:44:31,895 - users - INFO - Updating user: 3
2025-03-14 10:44:32,508 - users - INFO - Deleting user: 2
2025-03-14 10:44:32,512 - users - INFO - User deleted successfully: 2
2025-03-14 10:44:32,761 - users - INFO - Deleting user: 999
2025-03-14 10:45:52,130 - users - INFO - Creating new user: testuser
2025-03-14 10:45:52,369 - users - INFO - User created successfully: 1
2025-03-14 10:45:52,845 - users - INFO - Creating new user: testuser
2025-03-14 10:45:53,331 - users - INFO - Creating new user: testuser2
2025-03-14 10:45:53,812 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 10:45:53,815 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 10:45:54,293 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 10:45:54,293 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x109299420>]
2025-03-14 10:45:54,295 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 10:45:54,771 - users - INFO - Fetching user with id: 2
2025-03-14 10:45:55,254 - users - INFO - Updating user: 2
2025-03-14 10:45:55,256 - users - INFO - User updated successfully: 2
2025-03-14 10:45:55,513 - users - INFO - Updating user: 999
2025-03-14 10:45:56,241 - users - INFO - Updating user: 3
2025-03-14 10:45:56,725 - users - INFO - Deleting user: 2
2025-03-14 10:45:56,728 - users - INFO - User deleted successfully: 2
2025-03-14 10:45:56,980 - users - INFO - Deleting user: 999
2025-03-14 10:47:10,121 - users - INFO - Creating new user: testuser
2025-03-14 10:47:10,358 - users - INFO - User created successfully: 1
2025-03-14 10:47:10,839 - users - INFO - Creating new user: testuser
2025-03-14 10:47:11,327 - users - INFO - Creating new user: testuser2
2025-03-14 10:47:11,806 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 10:47:11,808 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 10:47:12,290 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 10:47:12,290 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x11a6aa7a0>]
2025-03-14 10:47:12,292 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 10:47:12,770 - users - INFO - Fetching user with id: 2
2025-03-14 10:47:13,251 - users - INFO - Updating user: 2
2025-03-14 10:47:13,252 - users - INFO - User updated successfully: 2
2025-03-14 10:47:13,497 - users - INFO - Updating user: 999
2025-03-14 10:47:14,327 - users - INFO - Updating user: 3
2025-03-14 10:47:15,048 - users - INFO - Deleting user: 2
2025-03-14 10:47:15,051 - users - INFO - User deleted successfully: 2
2025-03-14 10:47:15,295 - users - INFO - Deleting user: 999
2025-03-14 10:50:38,731 - users - INFO - Creating new user: testuser
2025-03-14 10:50:38,968 - users - INFO - User created successfully: 1
2025-03-14 10:50:39,449 - users - INFO - Creating new user: testuser
2025-03-14 10:50:39,934 - users - INFO - Creating new user: testuser2
2025-03-14 10:50:40,425 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 10:50:40,428 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 10:50:40,910 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 10:50:40,910 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x105079510>]
2025-03-14 10:50:40,912 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 10:50:41,392 - users - INFO - Fetching user with id: 2
2025-03-14 10:50:41,874 - users - INFO - Updating user: 2
2025-03-14 10:50:41,876 - users - INFO - User updated successfully: 2
2025-03-14 10:50:42,120 - users - INFO - Updating user: 999
2025-03-14 10:50:42,833 - users - INFO - Updating user: 3
2025-03-14 10:50:43,314 - users - INFO - Deleting user: 2
2025-03-14 10:50:43,317 - users - INFO - User deleted successfully: 2
2025-03-14 10:50:43,562 - users - INFO - Deleting user: 999
2025-03-14 10:52:43,234 - users - INFO - Creating new user: testuser
2025-03-14 10:52:43,471 - users - INFO - User created successfully: 1
2025-03-14 10:52:43,950 - users - INFO - Creating new user: testuser
2025-03-14 10:52:44,426 - users - INFO - Creating new user: testuser2
2025-03-14 10:52:44,905 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 10:52:44,907 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 10:52:45,383 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 10:52:45,384 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1040914e0>]
2025-03-14 10:52:45,386 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 10:52:45,861 - users - INFO - Fetching user with id: 2
2025-03-14 10:52:46,342 - users - INFO - Updating user: 2
2025-03-14 10:52:46,344 - users - INFO - User updated successfully: 2
2025-03-14 10:52:46,586 - users - INFO - Updating user: 999
2025-03-14 10:52:47,350 - users - INFO - Updating user: 3
2025-03-14 10:52:47,828 - users - INFO - Deleting user: 2
2025-03-14 10:52:47,830 - users - INFO - User deleted successfully: 2
2025-03-14 10:52:48,075 - users - INFO - Deleting user: 999
2025-03-14 13:10:41,267 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:10:41,297 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:10:43,196 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:10:43,198 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:17:52,159 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:17:52,168 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:17:56,465 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:17:56,467 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:17:59,654 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:17:59,661 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:18:12,447 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:18:12,456 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:18:14,864 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:18:14,876 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:19:19,749 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:19:19,760 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:20:05,625 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:20:05,689 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:20:18,179 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:20:18,183 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:20:39,073 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:20:39,099 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:20:59,621 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:20:59,648 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:21:05,821 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:21:05,859 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:21:07,900 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:21:07,911 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:21:08,113 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:21:08,118 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:21:09,303 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:21:09,306 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:21:15,516 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:21:15,538 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:21:36,306 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:21:36,313 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:23:00,237 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:23:00,267 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:23:02,215 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:23:02,217 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:23:03,280 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:23:03,284 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:23:05,546 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:23:05,555 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:23:06,812 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:23:06,814 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:23:42,437 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:23:42,441 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:23:52,291 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:23:52,313 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:23:53,720 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:23:53,754 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:24:35,326 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:24:35,403 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:24:37,397 - users - INFO - Fetching user with id: 1
2025-03-14 13:24:40,364 - users - INFO - Fetching user with id: 1
2025-03-14 13:24:42,315 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:24:42,322 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:24:47,040 - users - INFO - Fetching user with id: 3
2025-03-14 13:24:50,422 - users - INFO - Fetching user with id: 3
2025-03-14 13:24:56,387 - users - INFO - Updating user: 3
2025-03-14 13:24:56,459 - users - INFO - User updated successfully: 3
2025-03-14 13:25:16,712 - users - INFO - Fetching user with id: 3
2025-03-14 13:25:18,449 - users - INFO - Fetching user with id: 3
2025-03-14 13:25:19,111 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:25:19,115 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:25:21,070 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:25:21,075 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:25:25,719 - users - INFO - Fetching user with id: 2
2025-03-14 13:25:29,790 - users - INFO - Updating user: 2
2025-03-14 13:25:29,821 - users - INFO - User updated successfully: 2
2025-03-14 13:28:11,711 - users - INFO - Fetching user with id: 2
2025-03-14 13:33:29,247 - users - INFO - Fetching user with id: 2
2025-03-14 13:33:38,945 - users - INFO - Fetching user with id: 2
2025-03-14 13:34:05,775 - users - INFO - Fetching user with id: 2
2025-03-14 13:34:08,508 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:34:08,619 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:36:42,690 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:36:42,698 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:37:20,762 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:37:20,778 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:37:22,496 - users - INFO - Fetching user with id: 1
2025-03-14 13:51:37,269 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:51:37,297 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:51:38,975 - users - INFO - Fetching user with id: 2
2025-03-14 13:51:41,535 - users - INFO - Updating user: 2
2025-03-14 13:51:41,564 - users - INFO - User updated successfully: 2
2025-03-14 13:51:41,652 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:51:41,654 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:51:46,252 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:51:46,258 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:51:47,175 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:51:47,177 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:52:44,624 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:52:44,627 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:56:51,573 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:56:51,579 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 13:56:55,065 - users - INFO - Fetching user with id: 2
2025-03-14 13:58:20,387 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 13:58:20,413 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:00:03,395 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:00:03,397 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:00:32,403 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:00:32,418 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:00:38,689 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:00:38,692 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:00:45,576 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:00:45,597 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:01:28,859 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:01:28,890 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:03:09,529 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:03:09,545 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:04:29,337 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:04:29,340 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:05:01,374 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:05:01,392 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:07:07,549 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:07:07,552 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:07:09,759 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:07:09,763 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:54:00,480 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:54:00,518 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:54:05,284 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:54:05,288 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:55:06,574 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:55:06,578 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:55:08,706 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:55:08,710 - users - INFO - Found 3 users out of 3 total matches
2025-03-14 14:55:32,418 - users - INFO - Creating new user: 1234567
2025-03-14 14:55:36,789 - users - INFO - Creating new user: 1234567
2025-03-14 14:55:37,069 - users - INFO - User created successfully: 5
2025-03-14 14:55:37,193 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:55:37,196 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 14:59:51,288 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:59:51,363 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 14:59:54,501 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 14:59:54,504 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:00:02,009 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:00:02,041 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:00:35,965 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:00:36,078 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:00:39,538 - users - INFO - Fetching user with id: 2
2025-03-14 15:00:51,556 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:00:51,599 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:00:53,697 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:00:53,701 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:00:57,395 - users - INFO - Searching users with query: username= email=105257109@qq.com department= role=, skip: 0, limit: 10
2025-03-14 15:00:57,395 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x106940940>]
2025-03-14 15:00:57,454 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 15:01:01,294 - users - INFO - Searching users with query: username= email= department= role=admin, skip: 0, limit: 10
2025-03-14 15:01:01,295 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1068af1f0>]
2025-03-14 15:01:01,307 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 15:01:05,037 - users - INFO - Fetching user with id: 4
2025-03-14 15:01:08,133 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:01:08,138 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:01:45,102 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:01:45,123 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:01:47,872 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:01:47,886 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:02:03,558 - users - INFO - Fetching user with id: 2
2025-03-14 15:02:05,290 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:02:05,315 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:02:44,258 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:02:44,282 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:03:06,789 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:03:06,793 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:03:15,248 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:03:15,288 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:03:36,744 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:03:36,749 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:03:39,053 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:03:39,056 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:03:49,009 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:03:49,046 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:03:49,735 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:03:49,741 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:03:50,597 - users - INFO - Searching users with query: username= email= department= role=, skip: 0, limit: 10
2025-03-14 15:03:50,600 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 15:03:54,636 - users - INFO - Fetching user with id: 2
2025-03-14 16:25:14,681 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 16:25:14,688 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 16:25:21,236 - users - INFO - Fetching user with id: 2
2025-03-14 16:25:32,756 - users - INFO - Updating user: 2
2025-03-14 16:25:32,805 - users - INFO - User updated successfully: 2
2025-03-14 16:25:43,363 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 16:25:43,454 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 16:37:03,076 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 16:37:03,109 - users - INFO - Found 4 users out of 4 total matches
2025-03-14 16:37:13,597 - users - INFO - Creating new user: testuser2
2025-03-14 16:37:13,913 - users - INFO - User created successfully: 6
2025-03-14 16:37:23,496 - users - INFO - Fetching user with id: 6
2025-03-14 16:37:33,985 - users - INFO - Updating user: 6
2025-03-14 16:37:34,035 - users - INFO - User updated successfully: 6
2025-03-14 16:37:41,748 - users - INFO - Deleting user: 6
2025-03-14 16:37:41,800 - users - INFO - User deleted successfully: 6
2025-03-14 16:38:13,720 - users - INFO - Searching users with query: username=admin email=None department=None role=admin, skip: 0, limit: 10
2025-03-14 16:38:13,722 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1061dab60>, <sqlalchemy.sql.elements.BinaryExpression object at 0x1056ecd30>]
2025-03-14 16:38:13,750 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 16:38:22,904 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 16:38:22,905 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1061dae90>]
2025-03-14 16:38:22,940 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 16:38:53,646 - users - INFO - Creating new user: test1
2025-03-14 16:38:53,934 - users - INFO - User created successfully: 7
2025-03-14 16:39:03,652 - users - INFO - Creating new user: test2
2025-03-14 16:39:03,911 - users - INFO - User created successfully: 8
2025-03-14 16:44:09,063 - users - INFO - Creating new user: test1
2025-03-14 16:44:18,841 - users - INFO - Creating new user: testuser1
2025-03-14 16:44:19,160 - users - INFO - User created successfully: 9
2025-03-14 16:44:26,986 - users - INFO - Creating new user: testuser2
2025-03-14 16:44:27,261 - users - INFO - User created successfully: 10
2025-03-14 16:47:15,970 - users - INFO - Batch deleting users with ids: [9, 10]
2025-03-14 16:47:16,024 - users - INFO - Successfully deleted 2 users
2025-03-14 16:47:23,177 - users - INFO - Updating avatar for user: 4
2025-03-14 16:47:23,213 - users - INFO - Avatar updated successfully for user: 4
2025-03-14 16:47:29,938 - users - INFO - Fetching user with id: 4
2025-03-14 16:48:47,587 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 16:48:47,632 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 16:48:47,632 - users - ERROR - Error searching users: 'User' object has no attribute 'avatar'
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 118, in search_users
    "data": [
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 126, in <listcomp>
    "avatar": user.avatar,
AttributeError: 'User' object has no attribute 'avatar'
2025-03-14 16:49:54,097 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 16:49:54,145 - users - ERROR - Error searching users: (pymysql.err.OperationalError) (1054, "Unknown column 'users.avatar' in 'field list'")
[SQL: SELECT count(*) AS count_1 
FROM (SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.full_name AS users_full_name, users.department AS users_department, users.`role` AS users_role, users.hashed_password AS users_hashed_password, users.avatar AS users_avatar, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'users.avatar' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 110, in search_users
    total = db_users.count()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 3111, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2804, in scalar
    ret = self.one()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2777, in one
    return self._iter().one()  # type: ignore
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2826, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2306, in execute
    return self._execute_internal(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'users.avatar' in 'field list'")
[SQL: SELECT count(*) AS count_1 
FROM (SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.full_name AS users_full_name, users.department AS users_department, users.`role` AS users_role, users.hashed_password AS users_hashed_password, users.avatar AS users_avatar, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-14 16:50:24,344 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 16:50:24,377 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 16:54:38,603 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 16:54:38,659 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 16:54:41,840 - users - INFO - Fetching user with id: 2
2025-03-14 16:54:48,925 - users - INFO - Updating user: 2
2025-03-14 16:54:48,986 - users - INFO - User updated successfully: 2
2025-03-14 16:54:49,007 - users - INFO - Updating avatar for user: 2
2025-03-14 16:54:49,068 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 8, 54, 49, 27496), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 8, 54, 49, 27496), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 16:54:59,624 - users - INFO - Updating user: 2
2025-03-14 16:54:59,693 - users - INFO - User updated successfully: 2
2025-03-14 16:54:59,727 - users - INFO - Updating avatar for user: 2
2025-03-14 16:54:59,779 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 8, 54, 59, 729474), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 8, 54, 59, 729474), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 16:55:10,576 - users - INFO - Updating user: 2
2025-03-14 16:55:10,594 - users - INFO - User updated successfully: 2
2025-03-14 16:55:10,638 - users - INFO - Updating avatar for user: 2
2025-03-14 16:55:10,669 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 8, 55, 10, 640649), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 8, 55, 10, 640649), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 17:07:51,978 - users - INFO - Updating avatar for user: 2
2025-03-14 17:07:52,149 - users - INFO - Avatar updated successfully for user: 2
2025-03-14 17:08:00,471 - users - INFO - Updating user: 2
2025-03-14 17:08:00,543 - users - INFO - User updated successfully: 2
2025-03-14 17:08:00,591 - users - INFO - Updating avatar for user: 2
2025-03-14 17:08:00,949 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 8, 0, 599796), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 8, 0, 599796), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 17:08:14,235 - users - INFO - Fetching user with id: 2
2025-03-14 17:08:23,775 - users - INFO - Updating user: 2
2025-03-14 17:08:23,790 - users - INFO - User updated successfully: 2
2025-03-14 17:08:23,812 - users - INFO - Updating avatar for user: 2
2025-03-14 17:08:23,880 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 8, 23, 818596), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 8, 23, 818596), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 17:08:26,307 - users - INFO - Updating user: 2
2025-03-14 17:08:26,321 - users - INFO - User updated successfully: 2
2025-03-14 17:08:26,354 - users - INFO - Updating avatar for user: 2
2025-03-14 17:08:26,389 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 8, 26, 356486), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 8, 26, 356486), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 17:21:58,425 - users - INFO - Fetching user with id: 2
2025-03-14 17:25:17,525 - users - INFO - Fetching user with id: 2
2025-03-14 17:25:24,623 - users - INFO - Updating user: 2
2025-03-14 17:25:24,979 - users - INFO - User updated successfully: 2
2025-03-14 17:29:01,915 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 17:29:02,050 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 17:29:14,328 - users - INFO - Updating avatar for user: 2
2025-03-14 17:29:14,409 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 29, 14, 342045), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 29, 14, 342045), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 17:29:19,897 - users - INFO - Fetching user with id: 2
2025-03-14 17:29:26,650 - users - INFO - Updating user: 2
2025-03-14 17:29:26,940 - users - INFO - User updated successfully: 2
2025-03-14 17:29:27,043 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 17:29:27,051 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 17:29:41,312 - users - INFO - Updating avatar for user: 2
2025-03-14 17:29:41,367 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 29, 41, 322871), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 29, 41, 322871), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 17:30:41,280 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 17:30:41,417 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 17:38:24,902 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 17:38:24,923 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 17:38:39,800 - users - INFO - Updating avatar for user: 2
2025-03-14 17:38:39,895 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 38, 39, 808651), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 38, 39, 808651), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 17:39:58,229 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 17:39:58,240 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 17:41:01,763 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 17:41:01,861 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 17:41:20,226 - users - INFO - Updating avatar for user: 2
2025-03-14 17:41:20,286 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 41, 20, 237516), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 41, 20, 237516), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 17:43:54,931 - users - INFO - Updating avatar for user: 2
2025-03-14 17:43:55,014 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 43, 54, 977160), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAHb3RFWHRwcm9tcHQAeyI1NCI6IHsiaW5wdXRzIjogeyJja3B0X25hbWUiOiAic2QzLjVfbGFyZ2VfdHV ... (1400792 characters truncated) ... lSfuKkvMP70G2dBDOXBt6dB6ZqRR81469X+pfmGNLy8Bq2wgrgz4T1ngyJ30YX8ODnL5dB1RgJJRNHY//kggaqWoinJiCPtYQP0vMADib+39qor46K9Q3N/9/1GmUr9EgLQcAAAAASUVORK5CYII=', 'updated_at': datetime.datetime(2025, 3, 14, 9, 43, 54, 977160), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 17:44:05,508 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 17:44:05,547 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 17:44:07,274 - users - INFO - Fetching user with id: 2
2025-03-14 17:44:13,733 - users - INFO - Updating user: 2
2025-03-14 17:44:14,062 - users - INFO - User updated successfully: 2
2025-03-14 17:44:14,184 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 17:44:14,189 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 17:44:26,675 - users - INFO - Updating avatar for user: 2
2025-03-14 17:44:26,755 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAAW2VYSWZNTQAqAAAACAABATsAAgAAAEEAAAAaAAAAAGE3ZDdjZTVhYmUzMzE1MTVlOTUzZDBhZTY5NGQ ... (1441816 characters truncated) ... bZVhJZk1NACoAAAAIAAEBOwACAAAAQQAAABoAAAAAYTdkN2NlNWFiZTMzMTUxNWU5NTNkMGFlNjk0ZDEwZjZiNjg0ZGRkMjdmZGYxMTM5ZTgyYjFkZGQwMzRjMzUxYgA3ey3yAAAAAElFTkSuQmCC', 'updated_at': datetime.datetime(2025, 3, 14, 9, 44, 26, 702590), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAAW2VYSWZNTQAqAAAACAABATsAAgAAAEEAAAAaAAAAAGE3ZDdjZTVhYmUzMzE1MTVlOTUzZDBhZTY5NGQ ... (1441816 characters truncated) ... bZVhJZk1NACoAAAAIAAEBOwACAAAAQQAAABoAAAAAYTdkN2NlNWFiZTMzMTUxNWU5NTNkMGFlNjk0ZDEwZjZiNjg0ZGRkMjdmZGYxMTM5ZTgyYjFkZGQwMzRjMzUxYgA3ey3yAAAAAElFTkSuQmCC', 'updated_at': datetime.datetime(2025, 3, 14, 9, 44, 26, 702590), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 17:44:57,938 - users - INFO - Updating avatar for user: 2
2025-03-14 17:44:58,140 - users - ERROR - Error updating avatar: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAAW2VYSWZNTQAqAAAACAABATsAAgAAAEEAAAAaAAAAAGE3ZDdjZTVhYmUzMzE1MTVlOTUzZDBhZTY5NGQ ... (1441816 characters truncated) ... bZVhJZk1NACoAAAAIAAEBOwACAAAAQQAAABoAAAAAYTdkN2NlNWFiZTMzMTUxNWU5NTNkMGFlNjk0ZDEwZjZiNjg0ZGRkMjdmZGYxMTM5ZTgyYjFkZGQwMzRjMzUxYgA3ey3yAAAAAElFTkSuQmCC', 'updated_at': datetime.datetime(2025, 3, 14, 9, 44, 58, 59781), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.DataError: (1406, "Data too long for column 'avatar' at row 1")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/demo2/backend/app/api/users.py", line 304, in update_user_avatar
    db.commit()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4296, in flush
    self._flush(objects)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4431, in _flush
    with util.safe_reraise():
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4392, in _flush
    flush_context.execute()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1408, in execute
    return meth(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 822, in _read_query_result
    result.read()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/sunguochao/Documents/Development/cursor/demo2/venv/lib/python3.10/site-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, "Data too long for column 'avatar' at row 1")
[SQL: UPDATE users SET avatar=%(avatar)s, updated_at=%(updated_at)s WHERE users.id = %(users_id)s]
[parameters: {'avatar': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAIAAADwf7zUAAAAW2VYSWZNTQAqAAAACAABATsAAgAAAEEAAAAaAAAAAGE3ZDdjZTVhYmUzMzE1MTVlOTUzZDBhZTY5NGQ ... (1441816 characters truncated) ... bZVhJZk1NACoAAAAIAAEBOwACAAAAQQAAABoAAAAAYTdkN2NlNWFiZTMzMTUxNWU5NTNkMGFlNjk0ZDEwZjZiNjg0ZGRkMjdmZGYxMTM5ZTgyYjFkZGQwMzRjMzUxYgA3ey3yAAAAAElFTkSuQmCC', 'updated_at': datetime.datetime(2025, 3, 14, 9, 44, 58, 59781), 'users_id': 2}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-03-14 17:45:33,984 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 17:45:34,128 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 18:08:57,066 - users - INFO - Updating avatar for user: 3
2025-03-14 18:08:57,444 - users - INFO - Avatar updated successfully for user: 3
2025-03-14 18:08:57,470 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 18:08:57,572 - users - INFO - Found 6 users out of 6 total matches
2025-03-14 18:10:50,653 - users - INFO - Creating new user: testuser3
2025-03-14 18:10:51,015 - users - INFO - User created successfully: 11
2025-03-14 18:12:50,685 - users - INFO - Creating new user: 212121
2025-03-14 18:12:51,069 - users - INFO - User created successfully: 12
2025-03-14 18:18:10,696 - users - INFO - Creating new user: 21345675
2025-03-14 18:18:11,085 - users - INFO - User created successfully: 13
2025-03-14 18:18:11,308 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 18:18:11,332 - users - INFO - Found 9 users out of 9 total matches
2025-03-14 18:19:47,158 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 18:19:47,186 - users - INFO - Found 9 users out of 9 total matches
2025-03-14 18:19:49,094 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 18:19:49,112 - users - INFO - Found 9 users out of 9 total matches
2025-03-14 18:19:51,359 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 18:19:51,392 - users - INFO - Found 9 users out of 9 total matches
2025-03-14 18:20:10,904 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-14 18:20:10,950 - users - INFO - Found 9 users out of 9 total matches
2025-03-14 18:20:15,988 - users - INFO - Searching users with query: username=Admin email= department=None role=None, skip: 0, limit: 10
2025-03-14 18:20:15,989 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1084ab730>]
2025-03-14 18:20:16,034 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 18:20:41,721 - users - INFO - Updating avatar for user: 4
2025-03-14 18:20:41,786 - users - INFO - Avatar updated successfully for user: 4
2025-03-14 18:20:41,811 - users - INFO - Searching users with query: username=Admin email= department=None role=None, skip: 0, limit: 10
2025-03-14 18:20:41,811 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1084aa740>]
2025-03-14 18:20:41,851 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 18:20:45,693 - users - INFO - Searching users with query: username=Admin email= department=None role=None, skip: 0, limit: 10
2025-03-14 18:20:45,694 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1084f4ca0>]
2025-03-14 18:20:45,702 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 18:20:46,591 - users - INFO - Searching users with query: username=Admin email= department=None role=None, skip: 0, limit: 10
2025-03-14 18:20:46,591 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1084f59f0>]
2025-03-14 18:20:46,594 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 18:20:49,505 - users - INFO - Fetching user with id: 4
2025-03-14 18:23:58,495 - users - INFO - Creating new user: testuser
2025-03-14 18:23:59,002 - users - INFO - Creating new user: testuser2
2025-03-14 18:23:59,676 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 18:23:59,678 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 18:24:00,236 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 18:24:00,236 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x104ab7d60>]
2025-03-14 18:24:00,238 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 18:24:00,762 - users - INFO - Fetching user with id: 2
2025-03-14 18:24:01,340 - users - INFO - Updating user: 2
2025-03-14 18:24:01,341 - users - INFO - User updated successfully: 2
2025-03-14 18:24:01,609 - users - INFO - Updating user: 999
2025-03-14 18:24:02,380 - users - INFO - Updating user: 3
2025-03-14 18:24:02,890 - users - INFO - Deleting user: 2
2025-03-14 18:24:02,892 - users - INFO - User deleted successfully: 2
2025-03-14 18:24:03,156 - users - INFO - Deleting user: 999
2025-03-14 18:24:44,700 - users - INFO - Creating new user: testuser
2025-03-14 18:24:44,948 - users - INFO - User created successfully: 2
2025-03-14 18:24:45,459 - users - INFO - Creating new user: testuser
2025-03-14 18:24:45,966 - users - INFO - Creating new user: testuser2
2025-03-14 18:24:46,473 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-14 18:24:46,475 - users - INFO - Found 2 users out of 2 total matches
2025-03-14 18:24:46,987 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-14 18:24:46,987 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x105cb7d60>]
2025-03-14 18:24:46,989 - users - INFO - Found 1 users out of 1 total matches
2025-03-14 18:24:47,538 - users - INFO - Fetching user with id: 2
2025-03-14 18:24:48,051 - users - INFO - Updating user: 2
2025-03-14 18:24:48,052 - users - INFO - User updated successfully: 2
2025-03-14 18:24:48,312 - users - INFO - Updating user: 999
2025-03-14 18:24:49,094 - users - INFO - Updating user: 3
2025-03-14 18:24:49,601 - users - INFO - Deleting user: 2
2025-03-14 18:24:49,603 - users - INFO - User deleted successfully: 2
2025-03-14 18:24:49,863 - users - INFO - Deleting user: 999
2025-03-14 18:28:37,945 - users - INFO - Fetching user with id: 4
2025-03-15 11:30:46,172 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:30:46,177 - users - INFO - Found 8 users out of 8 total matches
2025-03-15 11:30:55,938 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:30:55,941 - users - INFO - Found 8 users out of 8 total matches
2025-03-15 11:31:13,908 - users - INFO - Updating avatar for user: 4
2025-03-15 11:31:13,940 - users - ERROR - Error updating avatar: cache_user() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/Blog/backend/app/api/users.py", line 390, in update_user_avatar
    cache_user(db_user.id, user_data)
TypeError: cache_user() takes 1 positional argument but 2 were given
2025-03-15 11:31:18,536 - users - INFO - Updating avatar for user: 4
2025-03-15 11:31:18,545 - users - ERROR - Error updating avatar: cache_user() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/Blog/backend/app/api/users.py", line 390, in update_user_avatar
    cache_user(db_user.id, user_data)
TypeError: cache_user() takes 1 positional argument but 2 were given
2025-03-15 11:31:56,215 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:31:56,217 - users - INFO - Found 8 users out of 8 total matches
2025-03-15 11:32:09,708 - users - INFO - Creating new user: 2q121
2025-03-15 11:32:09,958 - users - INFO - User created successfully: 14
2025-03-15 11:32:10,025 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:32:10,028 - users - INFO - Found 9 users out of 9 total matches
2025-03-15 11:32:25,924 - users - INFO - Fetching user with id: 14
2025-03-15 11:32:46,855 - users - INFO - Creating new user: 2q121
2025-03-15 11:32:51,854 - users - INFO - Creating new user: 2q12122
2025-03-15 11:32:56,324 - users - INFO - Creating new user: 2q12122
2025-03-15 11:32:56,576 - users - INFO - User created successfully: 15
2025-03-15 11:32:56,639 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:32:56,642 - users - INFO - Found 10 users out of 10 total matches
2025-03-15 11:33:03,676 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:33:03,677 - users - INFO - Found 10 users out of 10 total matches
2025-03-15 11:33:05,943 - users - INFO - Fetching user with id: 2
2025-03-15 11:33:08,308 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:33:08,310 - users - INFO - Found 10 users out of 10 total matches
2025-03-15 11:34:14,058 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:34:14,063 - users - INFO - Found 10 users out of 10 total matches
2025-03-15 11:34:18,028 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:34:18,031 - users - INFO - Found 10 users out of 10 total matches
2025-03-15 11:34:21,165 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:34:21,167 - users - INFO - Found 10 users out of 10 total matches
2025-03-15 11:34:52,893 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:34:52,895 - users - INFO - Found 10 users out of 10 total matches
2025-03-15 11:34:54,908 - users - INFO - Fetching user with id: 2
2025-03-15 11:34:56,839 - users - INFO - Updating user: 2
2025-03-15 11:34:57,094 - users - INFO - User updated successfully: 2
2025-03-15 11:34:57,177 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:34:57,180 - users - INFO - Found 10 users out of 10 total matches
2025-03-15 11:34:59,453 - users - INFO - Fetching user with id: 5
2025-03-15 11:35:07,231 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:35:07,233 - users - INFO - Found 10 users out of 10 total matches
2025-03-15 11:39:15,455 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:39:15,458 - users - INFO - Found 10 users out of 10 total matches
2025-03-15 11:39:19,710 - users - INFO - Deleting user: 15
2025-03-15 11:39:19,721 - users - INFO - User deleted successfully: 15
2025-03-15 11:39:19,747 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:39:19,750 - users - INFO - Found 9 users out of 9 total matches
2025-03-15 11:39:22,112 - users - INFO - Deleting user: 14
2025-03-15 11:39:22,119 - users - INFO - User deleted successfully: 14
2025-03-15 11:39:22,143 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:39:22,146 - users - INFO - Found 8 users out of 8 total matches
2025-03-15 11:39:39,397 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-15 11:39:39,399 - users - INFO - Found 8 users out of 8 total matches
2025-03-17 09:46:37,230 - users - INFO - Creating new user: testuser
2025-03-17 09:46:37,465 - users - INFO - User created successfully: 2
2025-03-17 09:46:37,961 - users - INFO - Creating new user: testuser
2025-03-17 09:46:38,483 - users - INFO - Creating new user: testuser2
2025-03-17 09:46:38,979 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-17 09:46:38,981 - users - INFO - Found 2 users out of 2 total matches
2025-03-17 09:46:39,462 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-17 09:46:39,463 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x107fca7d0>]
2025-03-17 09:46:39,465 - users - INFO - Found 1 users out of 1 total matches
2025-03-17 09:46:39,968 - users - INFO - Fetching user with id: 2
2025-03-17 09:46:40,447 - users - INFO - Updating user: 2
2025-03-17 09:46:40,448 - users - INFO - User updated successfully: 2
2025-03-17 09:46:40,691 - users - INFO - Updating user: 999
2025-03-17 09:46:41,410 - users - INFO - Updating user: 3
2025-03-17 09:46:41,900 - users - INFO - Deleting user: 2
2025-03-17 09:46:41,903 - users - INFO - User deleted successfully: 2
2025-03-17 09:46:42,169 - users - INFO - Deleting user: 999
2025-03-17 09:47:48,698 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 09:47:48,702 - users - INFO - Found 10 users out of 12 total matches
2025-03-17 09:48:01,505 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 09:48:01,509 - users - INFO - Found 10 users out of 12 total matches
2025-03-17 09:48:04,936 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 09:48:04,939 - users - INFO - Found 10 users out of 12 total matches
2025-03-17 09:48:59,491 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 09:48:59,510 - users - INFO - Found 10 users out of 12 total matches
2025-03-17 09:49:03,242 - users - INFO - Searching users with query: username=admin email= department=None role=None, skip: 0, limit: 10
2025-03-17 09:49:03,242 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x1083acbb0>]
2025-03-17 09:49:03,245 - users - INFO - Found 1 users out of 1 total matches
2025-03-17 09:49:17,488 - users - INFO - Updating avatar for user: 4
2025-03-17 09:49:17,498 - users - ERROR - Error updating avatar: cache_user() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/Blog/backend/app/api/users.py", line 390, in update_user_avatar
    cache_user(db_user.id, user_data)
TypeError: cache_user() takes 1 positional argument but 2 were given
2025-03-17 09:49:24,638 - users - INFO - Updating avatar for user: 4
2025-03-17 09:49:24,644 - users - ERROR - Error updating avatar: cache_user() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "/Users/sunguochao/Documents/Development/cursor/Blog/backend/app/api/users.py", line 390, in update_user_avatar
    cache_user(db_user.id, user_data)
TypeError: cache_user() takes 1 positional argument but 2 were given
2025-03-17 09:49:52,050 - users - INFO - Creating new user: 1111111111
2025-03-17 09:49:52,300 - users - INFO - User created successfully: 20
2025-03-17 09:49:52,370 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 09:49:52,373 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 09:50:22,646 - users - INFO - Fetching user with id: 2
2025-03-17 11:31:14,465 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 11:31:14,477 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 11:31:25,042 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 11:31:25,047 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 12:15:39,712 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 12:15:39,760 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 12:15:46,527 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 12:15:46,530 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 12:21:25,851 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 12:21:25,854 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 12:21:38,395 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 12:21:38,397 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 12:21:43,817 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 12:21:43,819 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 12:21:58,920 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 12:21:58,922 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 12:22:14,802 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 12:22:14,806 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 12:24:57,122 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 12:24:57,124 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 13:04:43,523 - users - INFO - Creating new user: testuser
2025-03-17 13:04:43,795 - users - INFO - User created successfully: 2
2025-03-17 13:04:44,296 - users - INFO - Creating new user: testuser
2025-03-17 13:04:44,838 - users - INFO - Creating new user: testuser2
2025-03-17 13:04:45,331 - users - INFO - Searching users with query: username=None email=None department=None role=None, skip: 0, limit: 10
2025-03-17 13:04:45,333 - users - INFO - Found 2 users out of 2 total matches
2025-03-17 13:04:45,816 - users - INFO - Searching users with query: username=None email=None department=IT role=None, skip: 0, limit: 10
2025-03-17 13:04:45,817 - users - DEBUG - Applying filters: [<sqlalchemy.sql.elements.BinaryExpression object at 0x110573220>]
2025-03-17 13:04:45,818 - users - INFO - Found 1 users out of 1 total matches
2025-03-17 13:04:46,302 - users - INFO - Fetching user with id: 2
2025-03-17 13:04:46,787 - users - INFO - Updating user: 2
2025-03-17 13:04:46,788 - users - INFO - User updated successfully: 2
2025-03-17 13:04:47,035 - users - INFO - Updating user: 999
2025-03-17 13:04:47,754 - users - INFO - Updating user: 3
2025-03-17 13:04:48,236 - users - INFO - Deleting user: 2
2025-03-17 13:04:48,238 - users - INFO - User deleted successfully: 2
2025-03-17 13:04:48,485 - users - INFO - Deleting user: 999
2025-03-17 13:18:43,871 - users - INFO - Searching users with query: username= email= department=None role=None, skip: 0, limit: 10
2025-03-17 13:18:43,878 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:13:37,980 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:13:37,986 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:13:39,508 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:13:39,519 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:14:07,211 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:14:07,214 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:19:24,097 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:19:24,100 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:19:30,844 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:19:30,858 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:22:58,939 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:22:58,965 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:24:56,197 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:24:56,202 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:26:05,144 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:26:05,147 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:28:20,521 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:28:20,524 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:30:47,365 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:30:47,369 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:30:49,829 - users - INFO - Fetching user with id: 2
2025-03-17 14:30:58,565 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:30:58,580 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 14:31:02,522 - users - INFO - Deleting user: 16
2025-03-17 14:31:02,575 - users - INFO - User deleted successfully: 16
2025-03-17 14:31:02,604 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:31:02,607 - users - INFO - Found 10 users out of 12 total matches
2025-03-17 14:31:06,453 - users - INFO - Deleting user: 17
2025-03-17 14:31:06,460 - users - INFO - User deleted successfully: 17
2025-03-17 14:31:06,489 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:31:06,491 - users - INFO - Found 10 users out of 11 total matches
2025-03-17 14:31:28,270 - users - INFO - Creating new user: 特殊调调色
2025-03-17 14:31:28,558 - users - INFO - User created successfully: 21
2025-03-17 14:31:28,683 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 14:31:28,694 - users - INFO - Found 10 users out of 12 total matches
2025-03-17 14:31:33,383 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 2, size: 10
2025-03-17 14:31:33,386 - users - INFO - Found 2 users out of 12 total matches
2025-03-17 18:11:25,500 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 18:11:25,508 - users - INFO - Found 10 users out of 12 total matches
2025-03-17 18:45:22,235 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 18:45:22,239 - users - INFO - Found 10 users out of 12 total matches
2025-03-17 18:45:40,495 - users - INFO - Creating new user: erqwerwe
2025-03-17 18:45:40,834 - users - INFO - User created successfully: 22
2025-03-17 18:45:40,985 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 18:45:41,010 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 18:45:45,143 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 2, size: 10
2025-03-17 18:45:45,144 - users - INFO - Found 3 users out of 13 total matches
2025-03-17 18:45:47,318 - users - INFO - Fetching user with id: 22
2025-03-17 18:45:51,085 - users - INFO - Updating user: 22
2025-03-17 18:45:51,369 - users - INFO - User updated successfully: 22
2025-03-17 18:45:51,485 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 18:45:51,527 - users - INFO - Found 10 users out of 13 total matches
2025-03-17 18:45:54,012 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 2, size: 10
2025-03-17 18:45:54,041 - users - INFO - Found 3 users out of 13 total matches
2025-03-17 18:45:56,830 - users - INFO - Deleting user: 22
2025-03-17 18:45:56,844 - users - INFO - User deleted successfully: 22
2025-03-17 18:45:56,870 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 2, size: 10
2025-03-17 18:45:56,872 - users - INFO - Found 2 users out of 12 total matches
2025-03-17 18:46:00,995 - users - INFO - Deleting user: 21
2025-03-17 18:46:01,000 - users - INFO - User deleted successfully: 21
2025-03-17 18:46:01,016 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 2, size: 10
2025-03-17 18:46:01,018 - users - INFO - Found 1 users out of 11 total matches
2025-03-17 19:05:03,214 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 19:05:03,227 - users - INFO - Found 10 users out of 11 total matches
2025-03-17 19:05:06,881 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 19:05:06,890 - users - INFO - Found 10 users out of 11 total matches
2025-03-17 19:05:09,966 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 19:05:09,970 - users - INFO - Found 10 users out of 11 total matches
2025-03-17 19:17:36,493 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 19:17:36,555 - users - INFO - Found 10 users out of 11 total matches
2025-03-17 19:33:58,167 - users - INFO - Searching users with query: username='' email='' department=None role=None, page: 1, size: 10
2025-03-17 19:33:58,177 - users - INFO - Found 10 users out of 11 total matches
