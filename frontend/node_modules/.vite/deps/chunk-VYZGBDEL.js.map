{
  "version": 3,
  "sources": ["../../ant-design-vue/es/_util/hooks/useDestroyed.js", "../../ant-design-vue/es/_util/ActionButton.js"],
  "sourcesContent": ["import { onBeforeUnmount, shallowRef } from 'vue';\nconst useDestroyed = () => {\n  const destroyed = shallowRef(false);\n  onBeforeUnmount(() => {\n    destroyed.value = true;\n  });\n  return destroyed;\n};\nexport default useDestroyed;", "import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\";\nimport { shallowRef, onMounted, defineComponent, onBeforeUnmount } from 'vue';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/buttonTypes';\nimport useDestroyed from './hooks/useDestroyed';\nimport { objectType } from './type';\nimport { findDOMNode } from './props-util';\nconst actionButtonProps = {\n  type: {\n    type: String\n  },\n  actionFn: Function,\n  close: Function,\n  autofocus: Boolean,\n  prefixCls: String,\n  buttonProps: objectType(),\n  emitEvent: Boolean,\n  quitOnNullishReturnValue: Boolean\n};\nfunction isThenable(thing) {\n  return !!(thing && thing.then);\n}\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'ActionButton',\n  props: actionButtonProps,\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const clickedRef = shallowRef(false);\n    const buttonRef = shallowRef();\n    const loading = shallowRef(false);\n    let timeoutId;\n    const isDestroyed = useDestroyed();\n    onMounted(() => {\n      if (props.autofocus) {\n        timeoutId = setTimeout(() => {\n          var _a, _b;\n          return (_b = (_a = findDOMNode(buttonRef.value)) === null || _a === void 0 ? void 0 : _a.focus) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n      }\n    });\n    onBeforeUnmount(() => {\n      clearTimeout(timeoutId);\n    });\n    const onInternalClose = function () {\n      var _a;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      (_a = props.close) === null || _a === void 0 ? void 0 : _a.call(props, ...args);\n    };\n    const handlePromiseOnOk = returnValueOfOnOk => {\n      if (!isThenable(returnValueOfOnOk)) {\n        return;\n      }\n      loading.value = true;\n      returnValueOfOnOk.then(function () {\n        if (!isDestroyed.value) {\n          loading.value = false;\n        }\n        onInternalClose(...arguments);\n        clickedRef.value = false;\n      }, e => {\n        // See: https://github.com/ant-design/ant-design/issues/6183\n        if (!isDestroyed.value) {\n          loading.value = false;\n        }\n        clickedRef.value = false;\n        return Promise.reject(e);\n      });\n    };\n    const onClick = e => {\n      const {\n        actionFn\n      } = props;\n      if (clickedRef.value) {\n        return;\n      }\n      clickedRef.value = true;\n      if (!actionFn) {\n        onInternalClose();\n        return;\n      }\n      let returnValueOfOnOk;\n      if (props.emitEvent) {\n        returnValueOfOnOk = actionFn(e);\n        if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n          clickedRef.value = false;\n          onInternalClose(e);\n          return;\n        }\n      } else if (actionFn.length) {\n        returnValueOfOnOk = actionFn(props.close);\n        // https://github.com/ant-design/ant-design/issues/23358\n        clickedRef.value = false;\n      } else {\n        returnValueOfOnOk = actionFn();\n        if (!returnValueOfOnOk) {\n          onInternalClose();\n          return;\n        }\n      }\n      handlePromiseOnOk(returnValueOfOnOk);\n    };\n    return () => {\n      const {\n        type,\n        prefixCls,\n        buttonProps\n      } = props;\n      return _createVNode(Button, _objectSpread(_objectSpread(_objectSpread({}, convertLegacyProps(type)), {}, {\n        \"onClick\": onClick,\n        \"loading\": loading.value,\n        \"prefixCls\": prefixCls\n      }, buttonProps), {}, {\n        \"ref\": buttonRef\n      }), slots);\n    };\n  }\n});"],
  "mappings": "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",
  "names": []
}
